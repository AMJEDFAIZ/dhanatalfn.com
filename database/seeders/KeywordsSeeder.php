<?php

namespace Database\Seeders;

use App\Models\Keyword;
use App\Services\KeywordService;
use Illuminate\Database\Seeder;

class KeywordsSeeder extends Seeder
{
    public function run(): void
    {
        $keywords = [
          /*   'اتصال معلم دهانات جدة',
            'اتصل معلم دهانات جدة',
            'استفسار دهانات جدة',
            'الاتصال',
            'الجزيرة',
            'الجزيرة دهانات',
            'الجزيره',
            'الفن الحديث',
            'المدونة',
            'الواح شيبورد',
            'الوان دهانات الحوائط بالصور',
            'ألوان بويات داخلية',
            'أحدث ألوان دهانات',
            'أفضل دهانات داخلية للفلل جدة',
            'أفضل معلم دهانات جدة',
            'افضل مقاول بجدة',
            'افضل مقاول بناء في جدة',
            'افضل مقاول في جدة',
            'أعمال دهانات داخلية وجدران جدة',
            'اتصال',
            'بديل الحجر',
            'بديل خشب خارجي',
            'بديل خشب داخلي',
            'بديل الخشب',
            'بديل الرخام',
            'بديل الشيبورد',
            'بديل شيبورد',
            'بديل شيبورد جدة',
            'بديل حجر جدة',
            'بوية الجزيرة',
            'بويه جدران',
            'بويه جوتن',
            'بويه جده',
            'تشطيبات عامة',
            'تشطيبات ودهانات جدة',
            'تشطيبات',
            'تواصل',
            'تواصل معنا',
            'تركيب ورق جدران ودهانات جدة',
            'ترميمات جدة',
            'ترميمات ودهانات',
            'جوتن للدهانات',
            'جبس بورد اسقف',
            'جبسيات اسقف',
            'خدمات دهانات للمنازل',
            'خدمات دهانات وديكور جدة',
            'خدمات ديكور داخلية وخارجية جدة',
            'خدمات ديكور للمنازل',
            'خدمات',
            'خدماتنا',
            'الخدمات',
            'دهان بروفايل خارجي',
            'دهان بويه',
            'دهان جده',
            'دهان جدة',
            'دهان جدران',
            'دهان واجهات',
            'دهانات',
            'دهانات الجزيره',
            'دهانات الجزيرة',
            'دهانات الداخل',
            'دهانات داخلية',
            'دهانات داخلية جدة',
            'دهانات داخية',
            'دهانات خارجية',
            'دهانات خارجية جدة',
            'دهانات تكنو',
            'دهانات وديكورات',
            'دهانات وديكورات جدة',
            'دهانات فوم وبانوهات فوم جدة',
            'دهانات مقاومة للرطوبة جدة',
            'ديكور بديل الخشب',
            'ديكور بديل الرخام',
            'ديكور بديل خشب',
            'ديكور بديل خشب جدة',
            'ديكور بديل رخام',
            'ديكور بديل رخام جدة',
            'ديكور جبس اسقف',
            'ديكور جبس بورد اسقف',
            'ديكور جدة',
            'ديكور مرايا',
            'ديكورات',
            'ديكورات رمضان',
            'ديكورات تلفزيون',
            'ديكورات فوم',
            'ديكورات ودهانات جدة',
            'فني ديكور',
            'فني ديكورات جدة',
            'معلم بناء جدة',
            'معلم بويه',
            'معلم بويه جدة',
            'معلم بوية',
            'معلم بوية جدة',
            'معلم بويا جدة',
            'معلم بويات جدة',
            'معلم جبس بجدة',
            'معلم جبس بورد',
            'معلم جبس جدة',
            'معلم دهان',
            'معلم دهان جده',
            'معلم دهان جدة',
            'معلم دهان في جدة',
            'معلم دهانات',
            'معلم دهانات جده',
            'معلم دهانات جدة',
            'معلم دهانات الروضة',
            'معلم دهانات وديكورات',
            'معلم دهانات وديكورات جدة',
            'معلم ديكور',
            'معلم ديكور جدة',
            'معلم فوم جدة',
            'من نحن',
            'مطلوب مقاول جبس بورد',
            'مطلوب مقاول دهانات',
            'مطلوب مقاولين دهانات',
            'مقاول اصباغ',
            'مقاول بجدة',
            'مقاول بناء جدة',
            'مقاول بناء في جدة',
            'مقاول تشطيب في جدة',
            'مقاول جبس بورد',
            'مقاول دهانات',
            'مقاول دهانات بجدة',
            'مقاول في جدة ممتاز',
            'مقاول كسر رخام',
            'مقاول ملاحق جده',
            'مقاول عام',
            'مقاول عام جدة',
            'مقاولين دهانات',
            'مشاريع',
            'مشاريعنا',
            'المشاريع',
            'مدونة',
            'ورق جدران',
            'ورق جدران جدة',
            'ورق جدران وديكور',
            'هدم عماير جده',
            'شيبورد',
            'شيبورد ديكور',
            'شيبورد خشب',
            'سعر دهانات جدة',
            'سعر المتر دهان داخلي جدة',
            'صباغ جدة',
            'ديكورات',
            'دهانات وديكورات', */
        ];

        $keywords = collect($keywords)
            ->filter(fn($v) => is_string($v) && trim($v) !== '')
            ->map(fn($v) => trim($v))
            ->unique()
            ->values()
            ->all();

        $keywordService = app(KeywordService::class);
        $locale = 'ar';

        foreach ($keywords as $name) {
            $prepared = $keywordService->prepareForSave($name, $locale);
            if ($prepared['name'] === '' || $prepared['normalized'] === '') {
                continue;
            }

            $exists = Keyword::query()
                ->where('locale', $prepared['locale'])
                ->where('normalized', $prepared['normalized'])
                ->exists();
            if ($exists) {
                continue;
            }

            Keyword::create([
                'name' => $prepared['name'],
                'slug' => $prepared['slug'],
                'normalized' => $prepared['normalized'],
                'locale' => $prepared['locale'],
                'active' => true,
            ]);
        }
    }
}
